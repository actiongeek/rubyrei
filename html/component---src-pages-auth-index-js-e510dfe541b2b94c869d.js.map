{"version":3,"sources":["webpack:///./src/pages/auth/index.js"],"names":["AuthService","window","require","Auth","MainWrapper","styled","div","Form","form","Classes","FORM_GROUP","LABEL","AuthPage","state","username","password","_onChange","evt","setState","target","name","value","_onSubmit","preventDefault","AxiosClient","get","params","then","res","signin","data","sessionToken","setTimeout","navigate","catch","err","console","log","render","content","charSet","rel","href","className","src","FwRRCEPLogos","alt","onSubmit","this","label","large","placeholder","onChange","type","intent","text","React","Component"],"mappings":"qOAUA,IAAIA,EAAc,KACd,oBAAOC,SACPD,EAAcE,EAAQ,KAA0BC,MAGpD,IAAMC,EAAcC,IAAOC,IAAV,wEAAGD,CAAH,oOAwBXE,EAAOF,IAAOG,KAAV,iEAAGH,CAAH,6HASHI,IAAQC,WAAoBD,IAAQE,OAarCC,E,4JACFC,MAAQ,CACJC,SAAU,GACVC,SAAU,I,EAGdC,UAAY,SAACC,GAAS,IAAD,EACjB,EAAKC,WAAL,MAAgBD,EAAIE,OAAOC,MAAOH,EAAIE,OAAOE,MAA7C,K,EAGJC,UAAY,SAACL,GACTA,EAAIM,iBAEJC,cAAYC,IAAI,SAAU,CACtBC,OAAQ,CACJZ,SAAU,EAAKD,MAAMC,SACrBC,SAAU,EAAKF,MAAME,YAG5BY,MAAK,SAAAC,GACC5B,GACCA,EAAY6B,OAAOD,EAAIE,KAAKC,cAChCC,WAAWC,YAAS,2BAA4B,QAEnDC,OAAM,SAAAC,GACHC,QAAQC,IAAIF,O,4GAIpBG,OAAA,WACI,OACI,kBAAC,UAAD,KACI,kBAAClC,EAAD,KACI,6BACA,kBAAC,SAAD,KACI,wEACA,0BAAMgB,KAAK,cAAcmB,QAAQ,4CACjC,0BAAMC,QAAQ,UACd,0BAAMC,IAAI,YAAYC,KAAK,mCAG/B,kBAAC,IAAD,KACI,2BAAG,yBAAKC,UAAU,YAAYC,IAAKC,IAAcC,IAAI,4DACrD,uDAEA,kBAACvC,EAAD,CAAMwC,SAAUC,KAAK1B,WACjB,kBAAC,IAAD,CAAWqB,UAAU,aAAaM,MAAM,YACpC,kBAAC,IAAD,CAAYC,OAAK,EAAC9B,KAAK,WAAW+B,YAAY,gBAAgBC,SAAUJ,KAAKhC,aAEjF,kBAAC,IAAD,CAAW2B,UAAU,aAAaM,MAAM,YACpC,kBAAC,IAAD,CAAYC,OAAK,EAACG,KAAK,WAAWjC,KAAK,WAAW+B,YAAY,gBAAgBC,SAAUJ,KAAKhC,aAEjG,kBAAC,IAAD,CAAQkC,OAAK,EAACI,OAAO,UAAUD,KAAK,SAASE,KAAK,iB,GApDvDC,IAAMC,WA6Dd7C","file":"component---src-pages-auth-index-js-e510dfe541b2b94c869d.js","sourcesContent":["import React from \"react\";\nimport {Helmet} from \"react-helmet\";\nimport { navigate } from \"gatsby\";\nimport styled from \"styled-components\";\nimport Layout from \"./layout\";\nimport { FormGroup, InputGroup, Button, Classes, /*Toaster, Position, Intent*/ } from \"@blueprintjs/core\";\nimport SectionWrapper from '../../components/SectionWrapper';\nimport { AxiosClient } from \"../../components/Utils\";\nimport FwRRCEPLogos from \"../../assets/img/FwRR-CEPstamp.png\";\n\nvar AuthService = null;\nif (typeof window !== `undefined`) {\n    AuthService = require(\"../../components/Utils\").Auth;\n}\n\nconst MainWrapper = styled.div`\n    display: block;\n    max-width: 560px;\n    margin: 0 auto;\n    margin-top: 48px;\n\n    h1, h2 {\n        display: block;\n        text-align: center;\n    }\n\n    h2 {\n        font-weight: 400;\n        font-size: 1.2em;\n    }\n    .top-logos {\n        display: block;\n        margin-left: auto;\n        margin-right: auto;\n        width: 60%;\n        max-width: 400px;\n    }\n`;\n\nconst Form = styled.form`\n    background-color: #f2f2f2;\n    padding: 40px;\n    margin-top: 40px;\n\n    .form-group {\n        margin-bottom: 32px;\n    }\n\n    .${Classes.FORM_GROUP} label.${Classes.LABEL} {\n        margin-bottom: 8px;\n    }\n`;\n\n/*\nconst ErrorToaster = Toaster.create({\n    className: 'error-toaster',\n    intent: Intent.DANGER,\n    position: Position.TOP\n}); \n*/\n\nclass AuthPage extends React.Component {\n    state = {\n        username: '',\n        password: ''\n    }\n\n    _onChange = (evt) => {\n        this.setState({[evt.target.name]: evt.target.value});\n    }\n\n    _onSubmit = (evt) => {\n        evt.preventDefault();\n\n        AxiosClient.get(\"/login\", {\n            params: {\n                username: this.state.username,\n                password: this.state.password\n            }\n        })\n        .then(res => {\n            if(AuthService)\n                AuthService.signin(res.data.sessionToken);\n            setTimeout(navigate(\"/auth/licence_generator\"), 2000);\n        })\n        .catch(err => {\n            console.log(err)\n        })\n    }\n\n    render() {\n        return(\n            <Layout>\n                <MainWrapper>\n                    <div>\n                    <Helmet>\n                        <title>Licence Generator - FUN with Ruby Rei</title>\n                        <meta name=\"description\" content=\"Licence Generator for FUN with Ruby Rei\" />\n                        <meta charSet=\"utf-8\" />\n                        <link rel=\"canonical\" href=\"https://fun.rubyrei.com/auth\" />\n                    </Helmet>\n                    </div>\n                    <SectionWrapper>\n                        <p><img className=\"top-logos\" src={FwRRCEPLogos} alt=\"FUN with Ruby Rei and Cambridge Exam Preparation logos\"/></p>\n                        <h1>Licence Generator Login</h1>\n\n                        <Form onSubmit={this._onSubmit}>\n                            <FormGroup className=\"form-group\" label=\"Username\">\n                                <InputGroup large name=\"username\" placeholder=\"Your username\" onChange={this._onChange}/>\n                            </FormGroup>\n                            <FormGroup className=\"form-group\" label=\"Password\">\n                                <InputGroup large type=\"password\" name=\"password\" placeholder=\"Your password\" onChange={this._onChange}/>\n                            </FormGroup>\n                            <Button large intent=\"success\" type=\"submit\" text=\"Sign in\"/>\n                        </Form>\n                    </SectionWrapper>\n                </MainWrapper>\n            </Layout>\n        );\n    }\n}\n\nexport default AuthPage;"],"sourceRoot":""}